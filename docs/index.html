<!doctype html>
<html class="theme-light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="ctrl-ing">

<meta name="keywords" content="">
<title>ctrl-ing</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/vs2015.min.css">

<link rel="stylesheet" href="./theme/styles.css">
<script src="https://cdn.jsdelivr.net/gh/goessner/g2@v2.5/src/g2.js"></script>
<script src="https://cdn.jsdelivr.net/gh/goessner/mec2@master/mec2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tweakpane@1.5.5/dist/tweakpane.min.js"></script>
</head>
<body>
<header>
  <a href="./index.html" class="left">&lt;ctrl-ing&gt;</a>
  <span class="right"><a href="./index.html">About</a> | <a href="https://github.com/dmitrijLo/HMI">Source</a></span>
</header>
<main>
<nav>
  <nav-pane base="." detail=false></nav-pane>
</nav>
<article>
  <p><canvas id="c" width="750" height="401" style="left:0rem;border:1px solid black;"></canvas></p>
<div style="position:relative;width:20rem;top:-29rem;left:1rem">
<h1 id="ctrl-ing"><code>&lt;ctrl-ing&gt;</code></h1>
<p>Take control over objects with this minimalistic panel designed as custom HTML element.</p>
</div>
<ctrl-ing ref="model" xOffset=50>
{
    "add":[ {"input":{}},{"dropdown":{}},{"toggle":{}},{"slider":{}},{"color":{}},{"output":{}},{"button":{}} ]
}
</ctrl-ing>
<script src="./bin/canvasInteractor.js"></script>
<script src="./bin/g2.core.js"></script>
<script src="./bin/g2.lib.js"></script>
<script src="./bin/g2.ext.js"></script>
<script src="./bin/g2.selector.js"></script>
<script>
const ctx = document.getElementById('c').getContext('2d');
const interactor = canvasInteractor.create(ctx, {x:200,y:200,cartesian:true});
const selector = g2.selector(interactor.evt);  // sharing 'evt' object ... !
const ctrlUpdate = () => document.getElementById('ctrl').update(); //ctrl-ing API for manual update
var model = { 
    mass: [ { x:0,y:0,m:10,label:'A' },
            { x:100,y:0,m:16,label:'B' },
            { x:0,y:-100,m:1,label:'C' }],
}
const g = g2().clr()                          // important with 'interaction'
              .view(interactor.view)           // view sharing ... !
              .grid()

interactor.on('tick', (e) => { g.exe(selector).exe(ctx) } )
          .on('pan',  (e) => { interactor.view.x += e.dx; interactor.view.y += e.dy; })
          .on('drag', (e) => {
              if (selector.selection && selector.selection.drag) {
                  selector.selection.drag({x:e.xusr,y:e.yusr,dx:e.dxusr,dy:e.dyusr,mode:'drag'});
                  update(e);
                  centroid.del().gnd(model.centroid);
                  ctrlUpdate();
              }})
          .startTimer();
</script>
</article>
</main>
<footer>
  <script src="https://cdn.jsdelivr.net/gh/dmitrijLo/ctrl-ing@master/src/ctrling.min.js"></script>
  
  <script src="./bin/navigation.js"></script>
  <span class="left">&copy; Dmitrij</span>
  <span class="center">powered by &mu;Jam &amp; <a href="https://code.visualstudio.com/">VSCode</a> &mdash; hosted by <a href="https://github.com/">GitHub</a></span>
  <span class="right"
        title="toggle light/dark theme"
        onclick="document.documentElement.className = document.documentElement.className === 'theme-dark' ? 'theme-light' : 'theme-dark';">
    &#9788;
  </span>
</footer>
</body>
</html>